<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>folder party ‚úê theme builder</title>
  <style>
    :root {
      /* --- customizable --- */
      --page-bg: #d2d2d2;
      --page-bg-image: none;
      /* --- filename button styles --- */
      --button-bg: #d2d2d2;
      --button-color: blue;
      --button-font: 'Times New Roman', Times, serif;
      --button-focus-bg: purple;
      --button-focus-color: white;
      --button-font-style: normal;
      --button-font-size: 1rem;
      --button-font-weight: normal;
      --button-text-decoration: underline;
      --button-padding: 5px;
      --button-box-shadow: 5px 5px 5px 0 rgba(51, 51, 51, 0.75);
      --button-border-color: none;
      --button-border-radius: 8px;
      --button-border-style: none;
      --button-border-width: 0px;
      /* --- fileviewer dialog styles --- */
      --dialog-border-color: #333333;
      --dialog-border-radius: 8px;
      --dialog-border-style: dotted;
      --dialog-border-width: 2px;
      --dialog-bg: #dfdfdf;
      --dialog-button-bg: #dfdfdf;
      --dialog-button-color: #333333;
      --dialog-button-font: monospace;
      --dialog-button-font-size: 0.80rem;
      --dialog-button-focus-bg: purple;
      --dialog-button-focus-color: white;
      --dialog-box-shadow: 5px 5px 5px 0 rgba(51, 51, 51, 0.75);
    }

    body {
      /* just used for utility */
      --basic-margin: 0.75rem;
      --page-max-width: 950px;

      /* customizable */
      background-color: var(--page-bg);
      background-image: var(--page-bg-image);
      /* set */
      padding: 0;
      /* https://medium.com/@specy.dev/automatic-text-color-from-background-in-css-bb0cd63e0657 */
      color: lch(
            from var(--page-bg)
            clamp(
                8,
                round((100 - l), 100),
                95
            )
            0 0
        );
    }

    .center {
      margin: 0 auto;
    }

    .margin-top,
    fieldset,
    fieldset + label,
    label + label {
      margin-top: var(--basic-margin);
    }

    header {
      margin-bottom: 1rem;
      padding: 1rem;
      z-index: 1;
      min-width: var(--page-max-width);
    }

    header > h1 {
      font-size: 1.75rem;
      font-style: italic;
      text-align: center;
    }

    p.intro {
      font-size: 1.25rem;
      margin: 0 auto 2rem;
      max-width: 600px;
    }

    .big-buttons {
      width: fit-content;
      padding-bottom: 2.5rem;
    }

    button.big-save {
      font-size: 1.5rem;
    }

    button.filename {
      /* customizable */
      background-color: var(--button-bg);
      border-color: var(--button-border-color);
      border-radius: var(--button-border-radius);
      border-style: var(--button-border-style);
      border-width: var(--button-border-width);
      box-shadow: var(--button-box-shadow);
      color: var(--button-color);
      font-family: var(--button-font);
      font-size: var(--button-font-size);
      font-style: var(--button-font-style);
      font-weight: var(--button-font-weight);
      padding: var(--button-padding);
      text-decoration: var(--button-text-decoration);
      /* set */
      height: max-content;
      max-width: 250px;
      overflow-wrap: anywhere;
      text-align: center;
      width: max-content;
    }

    button.filename:focus,
    button.filename.focus {
      /* customizable */
      background-color: var(--button-focus-bg);
      color: var(--button-focus-color);
      /* set */
      outline: none;
      text-decoration: none;
    }

    button.close-fileviewer {
      /* customizable */
      background-color: var(--dialog-button-bg);
      color: var(--dialog-button-color);
      font-family: var(--dialog-button-font);
      font-size: var(--dialog-button-font-size);
      /* set */
      border: none;
      border-radius: 5px;
      float: right;
      margin: 0.5rem -0.5rem -0.5rem 0.5rem;
      text-transform: uppercase;
    }

    button.close-fileviewer.focus,
    button.close-fileviewer:active,
    button.close-fileviewer:focus {
      /* customizable */
      background-color: var(--dialog-button-focus-bg);
      color: var(--dialog-button-focus-color);
      /* set */
      border-radius: 5px;
      outline: none;
    }

    dialog.fileviewer {
      position: static;
    }

    dialog.fileviewer[open] {
      /* customizable */
      background-color: var(--dialog-bg);
      border-color: var(--dialog-border-color);
      border-style: var(--dialog-border-style);
      border-radius: var(--dialog-border-radius);
      border-width: var(--dialog-border-width);
      box-shadow: var(--dialog-box-shadow);
      /* set */
      z-index: 2;
    }

    .table {
      display: grid;
      grid-template-columns: 1fr 2fr;
      grid-template-rows: 1fr;
      column-gap: 2rem;
      row-gap: 3rem;
      max-width: var(--page-max-width);
    }

    label {
      display: block;
    }

  </style>
  <script>
    const DATA_CONTROLS = "data-controls"
    const DATA_SHADOW_PROPERTY = "data-shadow-property"
    const FONT_SELECT_TO_PROPERTY = {
      "serif": "Times New Roman', Times, serif",
      "serif-2": "Georgia, 'Times New Roman', Times, serif",
      "sans-serif": "Arial, Helvetica, sans-serif",
      "sans-serif-2": "'Gill Sans', 'Gill Sans MT', Calibri, 'Trebuchet MS', sans-serif",
      "monospace": "'Lucida Console', Courier, monospace",
    }
    /**
     * @param {string} name
     * @param {number|string|null} value
     */
    function setGlobalCssVar(name, value) {
      document.documentElement.style.setProperty(name, value)
    }

    /**
     * @param {HTMLElement} element
     * @param {string} name
     * @param {number|string|null} value
     */
    function setStyle(element, name, value) {
      if (!element) {
        return
      }
      element.style.setProperty(name, value)
    }

    /** Transform a CSS shorthand string to an array of CSS values
     * @param {string} shorthand
     * @returns {Array<string>}
    */
    function cssShorthandToList(shorthand) {
      const values = []
      let currentValue = ""
      let insideParens = false
      for (let i = 0; i < shorthand.length; i++) {
        const char = shorthand[i];
        if (char === "(") {
          insideParens = true
        } else if (char === ")") {
          insideParens = false
        }

        if (char === " " && !insideParens) {
          values.push(currentValue)
          currentValue = ""
        } else {
          currentValue += char
        }

        if (i === shorthand.length - 1 && currentValue.length) {
          values.push(currentValue)
        }
      }

      return values
    }

    /**
     * @callback valueTransformer
     * @param {HTMLElement} element
     * @returns {string} cssPropertyValue
     */

    /** @type {valueTransformer} */
    const valueToRem = (element) => element.value + "rem"
    /** @type {valueTransformer} */
    const valueToPx = (element) => element.value + "px"
    /** @type {valueTransformer} */
    const selectToFontProperty = (element) => {
      const fontProperty = FONT_SELECT_TO_PROPERTY[element.value]
      if (!fontProperty) {
        console.warn(`missing css property for ${element.value}`)
        return
      }
      return fontProperty
    }

    /** @type {valueTransformer} */
    const composeBoxShadow = (element) => {
      const cssVarName = element.getAttribute(DATA_CONTROLS)
      const boxShadowProperty = element.getAttribute(DATA_SHADOW_PROPERTY)
      if (!boxShadowProperty) {
        console.warn(`missing 'data-shadow-property' for ${element.id}`)
        return "none"
      }

      const cssVarString = window.getComputedStyle(document.documentElement).getPropertyValue(cssVarName)
      const cssValues = cssShorthandToList(cssVarString)
      // This assumes that the shorthand has specific values (x, y, blur, spread, color)
      switch (boxShadowProperty) {
        case "position-x":
          cssValues[0] = valueToPx(element)
          break
        case "position-y":
          cssValues[1] = valueToPx(element)
          break
        case "blur":
          cssValues[2] = valueToPx(element)
          break
        case "spread":
          cssValues[3] = valueToPx(element)
          break
        case "color":
          cssValues[4] = element.value
          break
        default:
          console.warn(`missing 'data-shadow-property' for ${element.id}`)
          return "none"
      }

      return cssValues.join(" ")
    }

    /** @type {Object.<string, valueTransformer>} */
    const valueTransformers = {
      "dialog-button-font": selectToFontProperty,
      "dialog-button-font-size": valueToRem,
      "dialog-shadow-blur": composeBoxShadow,
      "dialog-shadow-color": composeBoxShadow,
      "dialog-shadow-position-x": composeBoxShadow,
      "dialog-shadow-position-y": composeBoxShadow,
      "dialog-shadow-spread": composeBoxShadow,
      "filename-border-radius": valueToPx,
      "filename-border-width": valueToPx,
      "filename-font": selectToFontProperty,
      "filename-font-bold": (element) => element.checked ? "bold" : "normal",
      "filename-font-italic": (element) => element.checked ? "italic" : "normal",
      "filename-font-size": valueToRem,
      "filename-font-underline": (element) => element.checked ? "underline" : "none",
      "filename-padding": valueToPx,
      "filename-shadow-blur": composeBoxShadow,
      "filename-shadow-color": composeBoxShadow,
      "filename-shadow-position-x": composeBoxShadow,
      "filename-shadow-position-y": composeBoxShadow,
      "filename-shadow-spread": composeBoxShadow,
    }

    /**
     * @callback reverseValueTransformer
     * @param {HTMLInputElement} input
     * @param {string} cssValue
     * @returns {undefined}
     */

    /** @type {reverseValueTransformer} */
    const defaultReverseTransformer = (input, cssValue) => input.value = cssValue
    /** @type {reverseValueTransformer} */
    const remToValue = (input, style) => input.value = style.replace("rem", "")
    /** @type {reverseValueTransformer} */
    const pxToValue = (input, style) => input.value = style.replace("px", "")
    /** @type {reverseValueTransformer} */
    const fontToValue = (input, style) => {
      const fontsToProperties = Object.entries(FONT_SELECT_TO_PROPERTY)
      for (let i = 0; i < fontsToProperties.length; i++) {
        const [inputValue, cssValue] = fontsToProperties[i];
        if (cssValue === style) {
          input.value = inputValue
          return
        }
      }
      console.warn(`missing font value for ${style}`)
    }
    /** @type {reverseValueTransformer} */
    const fontStyleToValue = (input, style) => style === "normal" ? input.checked = false : input.checked = true
    /** @type {reverseValueTransformer} */
    const composeValueFromBoxShadow = (input, style) => {
      const boxShadowProperty = input.getAttribute(DATA_SHADOW_PROPERTY)
      if (!boxShadowProperty) {
        console.warn(`missing 'data-shadow-property' for ${element.id}`)
      }

      const cssValues = cssShorthandToList(style)
      let inputValue = ""
      // This assumes that the shorthand has specific values (x, y, blur, spread, color)
      switch (boxShadowProperty) {
        case "position-x":
          pxToValue(input, cssValues[0])
          return
        case "position-y":
          pxToValue(input, cssValues[1])
          return
        case "blur":
          pxToValue(input, cssValues[2])
          return
        case "spread":
          pxToValue(input, cssValues[3])
          return
        case "color":
          defaultReverseTransformer(input, cssValues[4])
          return
        default:
          console.warn(`missing 'data-shadow-property' for ${element.id}`)
      }
    }

    /** @type {Object.<string, reverseValueTransformer>} */
    const reverseValueTransformers = {
      "dialog-button-font": fontToValue,
      "dialog-button-font-size": remToValue,
      "dialog-shadow-blur": composeValueFromBoxShadow,
      "dialog-shadow-color": composeValueFromBoxShadow,
      "dialog-shadow-position-x": composeValueFromBoxShadow,
      "dialog-shadow-position-y": composeValueFromBoxShadow,
      "dialog-shadow-spread": composeValueFromBoxShadow,
      "filename-border-radius": pxToValue,
      "filename-border-width": pxToValue,
      "filename-font": fontToValue,
      "filename-font-bold": fontStyleToValue,
      "filename-font-italic": fontStyleToValue,
      "filename-font-size": remToValue,
      "filename-font-underline": fontStyleToValue,
      "filename-padding": pxToValue,
      "filename-shadow-blur": composeValueFromBoxShadow,
      "filename-shadow-color": composeValueFromBoxShadow,
      "filename-shadow-position-x": composeValueFromBoxShadow,
      "filename-shadow-position-y": composeValueFromBoxShadow,
      "filename-shadow-spread": composeValueFromBoxShadow,
    }

    /**
     * @param {string} name
     * @param {number|string|null} value
     */
    function persistCssVarInUrl(name, value) {
      const params = new URLSearchParams(window.location.search)
      params.set(name, value)
      const currentUrl = new URL(window.location.toString())
      const updatedUrl = new URL(`?${params.toString()}`, currentUrl)
      // TODO: Assign current vars here if it's useful
      window.history.pushState({}, "", updatedUrl)
    }

    /** @param {URLSearchParams} params */
    function updatePageFromParams(params) {
      // TODO/Note: This won't handle variables that are unset or reset
      // to their default value
      params.forEach((value, key) => {
        if (key.startsWith("--")) {
          // Verify that the new value is different than current value
          const currentValue = document.documentElement.style.getPropertyValue(key)
          if (value !== currentValue) {
            const inputs = document.querySelectorAll(`[data-controls=${key}]`)
            if (!inputs.length) {
              console.warn(`missing inputs for ${value}, skipping`)
              return
            }
            // Set css variable value
            setGlobalCssVar(key, value)
            // Set input value (transforming css value to input value, if needed)
            inputs.forEach(input => {
              const updateInputValue = reverseValueTransformers[input.id] ?? defaultReverseTransformer
              updateInputValue(input, value)
            })
          }
        }
      })
    }

    /**
     * @param {InputEvent} e
     */
    function onInput(e) {
      const { target } = e
      if (!target || !target.id) {
        console.warn(`missing element ${target ? "id": ""}`)
        return
      }

      const controlsCssVar = target.getAttribute(DATA_CONTROLS)
      if (controlsCssVar !== null) {
        const transformValue = valueTransformers[target.id]
        const newValue = transformValue ? transformValue(target) : target.value
        // console.log(`setting ${controlsCssVar} to ${newValue}`)
        setGlobalCssVar(controlsCssVar, newValue)
        persistCssVarInUrl(controlsCssVar, newValue)
        return
      }

      // Custom event handlers for form elements that don't just
      // change a CSS variable value
      switch(target.id) {
        case "click-style":
          const filenameBtn = document.getElementById("filename")
          if (filenameBtn && target.checked) {
            filenameBtn.classList.add("focus")
          } else if (filenameBtn) {
            filenameBtn.classList.remove("focus")
          }
          return
        case "click-style-dialog-button":
          const dialogButton = document.getElementById("dialog-button")
          if (dialogButton && target.checked) {
            dialogButton.classList.add("focus")
          } else if (dialogButton) {
            dialogButton.classList.remove("focus")
          }
          return
        default:
          console.warn("missing element handler for", target.id)
      }
    }

    // Match against strings that start with '--' and include word + '-' or '_' characters up until a ':'
    const CSS_VAR_NAME_REGEX = /--[\w|\-|_]+(?=:)/g
    /** @returns {Array<string>} */
    function listRootCssVars() {
      const stylesheet = document.styleSheets.item(0)
      if (!stylesheet) {
        console.error("no stylesheet attached to document")
        return
      }
      const htmlCssRules = stylesheet.cssRules.item(0)
      if (!htmlCssRules || htmlCssRules.selectorText !== ":root" || !htmlCssRules.cssText.startsWith(":root")) {
        console.error("root is not the first css rule")
        return
      }

      // A wee bit hacky, but it'll work for now
      const varNameMatches = Array.from(htmlCssRules.cssText.matchAll(CSS_VAR_NAME_REGEX))
      const rootCssVarNames = varNameMatches.map((regexpArray) => regexpArray[0])

      return rootCssVarNames
    }

    /** @returns {string} */
    function getCustomizedCssVars() {
      const htmlStyle = document.documentElement.style
      if (htmlStyle.length === 0) {
        return ""
      }

      let customStyles = `:root {
  /* customized css variables for theme */`

      for (let i = 0; i < htmlStyle.length; i++) {
        const propertyName = htmlStyle.item(i);
        const propertyValue = htmlStyle.getPropertyValue(propertyName)
        if (propertyName.startsWith("--") && propertyValue.length > 0) {
          customStyles += `\n  ${propertyName}: ${propertyValue};`
        }
      }

      customStyles += "\n}"
      return customStyles
    }

    // TODO: Display errors so they're visible in the UI (not console)
    function saveTheme() {
      let url
      try {
        const customCssVars = getCustomizedCssVars()
        if (customCssVars.length === 0) {
          throw new Error("no custom styles to save")
        }
        const blob = new Blob([customCssVars], { type: "text/css" });
        url = URL.createObjectURL(blob);
        const link = document.createElement("a");
        link.href = url;
        link.download = "theme.css";
        link.click();
      } catch (err) {
        console.error("failed to download css", err)
        console.log("instead, you can copy the html in the 'Elements' tab")
      } finally {
        // for memory management
        URL.revokeObjectURL(url)
      }
    }

    function reset() {
      // Hard reset all the styles
      document.documentElement.style = ""
      // TODO: The input values will also need to be reset.
      const urlWithoutParams = new URL(window.location.pathname, window.location.origin)
      window.history.pushState({}, "", urlWithoutParams)
    }

    window.addEventListener("load", (event) => {
      const params = new URLSearchParams(window.location.search)
      updatePageFromParams(params)

      const idsWithCustomHandlers = ["page-bg-image", "page-bg-image_clear"]
      const allInputs = document.querySelectorAll("input,select")
      allInputs.forEach((input) => {
        // Ignore elements with custom handlers
        if (!idsWithCustomHandlers.includes(input.id)) {
          input.addEventListener("input", onInput)
        }
      })

      // Page background uploader
      const bgImageUploader = document.getElementById("page-bg-image")
      if (bgImageUploader) {
        bgImageUploader.addEventListener("change", (e) => {
          if (!e.target || !e.target.files) {
            return
          }
          // TODO: Consider encoding this data into base64, so it can be embedded on the page directly
          const imageUrl = URL.createObjectURL(e.target.files[0])
          setGlobalCssVar("--page-bg-image", `url("${imageUrl}")`)
        })
      }

      // Page background reset
      const bgImageClear = document.getElementById("page-bg-image_clear")
      if (bgImageClear) {
        bgImageClear.addEventListener("click", (e) => {
          setGlobalCssVar("--page-bg-image", "none")
          const uploader = document.getElementById("page-bg-image")
          if (uploader) {
            uploader.value = ""
          }
        })
      }
    })

    window.addEventListener("popstate", (_e) => {
      // If history changes (like pressing the "back" button), update page
      // based on search params
      const params = new URLSearchParams(window.location.search)
      updatePageFromParams(params)
    })
  </script>
</head>
<body>
  <header class="center">
    <h1>folder party ‚úê theme builder</h1>
  </header>
  <section class="">
    <p class="intro">welcome to the theme builder. <code>‚óï‚Äø‚óï</code> here you can customize the core elements of a folder party website and download the css styles to use. any feedback is very welcome!</p>
    <div class="big-buttons center">
      <button class="big-save" onclick="saveTheme()">save styles</button>
      <button class="big-save" onclick="reset()">reset</button>
    </div>
  </section>
  <!--
    Consider adding a view notes, like:
    - linking to an interactive version of the site
    - that elements are draggable
    - that there can be other requests for custom styles (possibly)
   -->
  <section class="table center">
    <label for="page-bg-color">page background color</label>
    <input id="page-bg-color" type="color" value="#d3d3d3" data-controls="--page-bg" />

    <label for="page-bg-image">page background image <i>(optional)</i></label>
    <div>
      <input id="page-bg-image" type="file" accept="image/*"/>
      <button id="page-bg-image_clear">clear</button>
    </div>

    <button id="filename" class="filename">folder/filename.png</button>
    <section>
      <label for="filename-bg-color">
        background color
        <input id="filename-bg-color" type="color" value="#d3d3d3" data-controls="--button-bg" />
      </label>

      <label for="filename-color">
        color
        <input id="filename-color" type="color" value="#0000ff" data-controls="--button-color" />
      </label>

      <fieldset>
        <legend>when clicked</legend>
        <label for="click-style">
          see "clicked" style
          <input id="click-style" type="checkbox" />
        </label>
        <label for="filename-bg-color_click">
          background color
          <input id="filename-bg-color_click" type="color" value="#800080" data-controls="--button-focus-bg"/>
        </label>
        <label for="filename-color_click">
          color
          <input id="filename-color_click" type="color" value="#ffffff" data-controls="--button-focus-color" />
        </label>
      </fieldset>

      <label for="filename-font" class="margin-top">
        font family
        <select id="filename-font" data-controls="--button-font">
          <option value="serif" selected>serif #1</option>
          <option value="serif-2">serif #2</option>
          <option value="sans-serif">sans-serif #1</option>
          <option value="sans-serif-2">sans-serif #2</option>
          <option value="monospace">monospace</option>
        </select>
      </label>

      <label for="filename-font-size">
        font size
        <input id="filename-font-size" type="number" value="1" min="0.5" max="8" step="0.125" data-controls="--button-font-size" /> rem
      </label>

      <fieldset>
        <legend>font style</legend>
        <label for="filename-font-bold">
          <input type="checkbox" id="filename-font-bold" data-controls="--button-font-weight" />
          bold
        </label>
        <label for="filename-font-italic">
          <input type="checkbox" id="filename-font-italic" data-controls="--button-font-style" />
          italic
        </label>
        <label for="filename-font-underline">
          <input type="checkbox" id="filename-font-underline" data-controls="--button-text-decoration" checked />
          underline
        </label>
      </fieldset>

      <label for="filename-padding">
        padding
        <input id="filename-padding" type="number" value="5" min="0" max="100" step="0.25" data-controls="--button-padding" /> px
      </label>

      <fieldset>
        <legend>box shadow</legend>
        <label for="filename-shadow-position-x">
          position (horizontal)
          <input id="filename-shadow-position-x" type="number" value="5" min="-100" max="100" step="1" data-controls="--button-box-shadow" data-shadow-property="position-x" /> px
        </label>
        <label for="filename-shadow-position-y">
          position (vertical)
          <input id="filename-shadow-position-y" type="number" value="5" min="-100" max="100" step="1" data-controls="--button-box-shadow" data-shadow-property="position-y" /> px
        </label>
        <label for="filename-shadow-blur">
          blur
          <input id="filename-shadow-blur" type="number" value="5" min="0" max="100" step="1" data-controls="--button-box-shadow" data-shadow-property="blur" /> px
        </label>
        <label for="filename-shadow-spread">
          spread
          <input id="filename-shadow-spread" type="number" value="5" min="0" max="100" step="1" data-controls="--button-box-shadow" data-shadow-property="spread" /> px
        </label>
        <label for="filename-shadow-color">
          color
          <input id="filename-shadow-color" type="color" value="#333333" data-controls="--button-box-shadow" data-shadow-property="color" />
        </label>
      </fieldset>

      <fieldset>
        <legend>border</legend>
        <label for="filename-border-style" class="margin-top">
          border style
          <select id="filename-border-style" data-controls="--button-border-style">
            <option value="none" selected>none</option>
            <option value="dotted">dotted</option>
            <option value="dashed">dashed</option>
            <option value="solid">solid</option>
            <option value="double">double</option>
            <option value="groove">groove</option>
            <option value="ridge">ridge</option>
            <option value="inset">inset</option>
            <option value="outset">outset</option>
          </select>
        </label>
        <label for="filename-border-width">
          width
          <input id="filename-border-width" type="number" value="0" min="0" max="100" step="1" data-controls="--button-border-width" /> px
        </label>
        <label for="filename-border-radius">
          radius
          <input id="filename-border-radius" type="number" value="8" min="0" max="100" step="1" data-controls="--button-border-radius" /> px
        </label>
        <label for="filename-border-color">
          color
          <input id="filename-border-color" type="color" value="#333333" data-controls="--button-border-color" />
        </label>
      </fieldset>

      <!-- <p><i>Coming soon</i></p>
      <ul>
        <li>custom styles</li>
      </ul> -->
    </section>

    <dialog class="fileviewer" open>
      <object class="file" data="./greatest-hits.png" draggable="false"></object>
      <object class="file" data="./some-text.txt" draggable="false"></object>
      <button id="dialog-button" class="close-fileviewer">close</button>
    </dialog>
    <section>
      <label for="dialog-bg-color">
        background color
        <input id="dialog-bg-color" type="color" value="#dfdfdf" data-controls="--dialog-bg" />
      </label>

      <label for="dialog-button-bg-color">
        button background color
        <input id="dialog-button-bg-color" type="color" value="#dfdfdf" data-controls="--dialog-button-bg" />
      </label>

      <label for="dialog-button-color">
        button color
        <input id="dialog-button-color" type="color" value="#333333" data-controls="--dialog-button-color" />
      </label>

       <fieldset>
        <legend>when clicked</legend>

        <label for="click-style-dialog-button">
          see "clicked" style
          <input id="click-style-dialog-button" type="checkbox" />
        </label>

        <label for="dialog-button-bg-color_click">
          background color
          <input id="dialog-button-bg-color_click" type="color" value="#800080" data-controls="--dialog-button-focus-bg"/>
        </label>
  
        <label for="dialog-button-color_click">
          color
          <input id="dialog-button-color_click" type="color" value="#ffffff" data-controls="--dialog-button-focus-color" />
        </label>
      </fieldset>

      <label for="dialog-button-font" class="margin-top">
        button font family
        <select id="dialog-button-font" data-controls="--dialog-button-font">
          <option value="serif">serif #1</option>
          <option value="serif-2">serif #2</option>
          <option value="sans-serif">sans-serif #1</option>
          <option value="sans-serif-2">sans-serif #2</option>
          <option value="monospace" selected>monospace</option>
        </select>
      </label>

      <label for="dialog-button-font-size">
        button font size
        <input id="dialog-button-font-size" type="number" value="0.8" min="0.5" max="8" step="0.125" data-controls="--dialog-button-font-size" /> rem
      </label>

      <fieldset>
        <legend>box shadow</legend>
        <label for="dialog-shadow-position-x">
          position (horizontal)
          <input id="dialog-shadow-position-x" type="number" value="5" min="-100" max="100" step="1" data-controls="--dialog-box-shadow" data-shadow-property="position-x" /> px
        </label>
        <label for="dialog-shadow-position-y">
          position (vertical)
          <input id="dialog-shadow-position-y" type="number" value="5" min="-100" max="100" step="1" data-controls="--dialog-box-shadow" data-shadow-property="position-y" /> px
        </label>
        <label for="dialog-shadow-blur">
          blur
          <input id="dialog-shadow-blur" type="number" value="5" min="0" max="100" step="1" data-controls="--dialog-box-shadow" data-shadow-property="blur" /> px
        </label>
        <label for="dialog-shadow-spread">
          spread
          <input id="dialog-shadow-spread" type="number" value="5" min="0" max="100" step="1" data-controls="--dialog-box-shadow" data-shadow-property="spread" /> px
        </label>
        <label for="dialog-shadow-color">
          color
          <input id="dialog-shadow-color" type="color" value="#333333" data-controls="--dialog-box-shadow" data-shadow-property="color" />
        </label>
      </fieldset>

      <fieldset>
        <legend>border</legend>
        <label for="dialog-border-style" class="margin-top">
          border style
          <select id="dialog-border-style" data-controls="--dialog-border-style">
            <option value="none">none</option>
            <option value="dotted" selected>dotted</option>
            <option value="dashed">dashed</option>
            <option value="solid">solid</option>
            <option value="double">double</option>
            <option value="groove">groove</option>
            <option value="ridge">ridge</option>
            <option value="inset">inset</option>
            <option value="outset">outset</option>
          </select>
        </label>
        <label for="dialog-border-width">
          width
          <input id="dialog-border-width" type="number" value="2" min="0" max="100" step="1" data-controls="--dialog-border-width" /> px
        </label>
        <label for="dialog-border-radius">
          radius
          <input id="dialog-border-radius" type="number" value="8" min="0" max="100" step="1" data-controls="--dialog-border-radius" /> px
        </label>
        <label for="dialog-border-color">
          color
          <input id="dialog-border-color" type="color" value="#333333" data-controls="--dialog-border-color" />
        </label>
      </fieldset>

      <!-- <p><i>Coming soon</i></p>
      <ul>
        <li>custom styles</li>
      </ul> -->

    </section>
    <!-- plus it'd be nice to have a free-form paste css here field -->
    <!-- add a full preview (with uploadable furniture) with a few draggable items -->
  </section>
</body>
</html>